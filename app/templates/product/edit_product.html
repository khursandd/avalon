{% extends 'main/base.html' %}
{% block title %}Mahsulotni tahrirlash: {{ product.name }}{% endblock %}

{% block content %}
<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-12 col-sm-10 col-md-8 col-lg-6 col-xl-5">

      <div class="card shadow-sm border-0 rounded-4">
        <div class="card-header bg-warning text-dark text-center">
          <h2 class="h5 mb-0">Mahsulotni tahrirlash</h2>
        </div>

        <div class="card-body">
          {% if product.image %}
            <div class="text-center mb-3">
              <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid rounded" style="max-height:150px; object-fit:cover;">
            </div>
          {% endif %}

          <form method="post" enctype="multipart/form-data" novalidate>
            {% csrf_token %}
            {{ form.non_field_errors }}

            <div class="mb-3">
              <label for="{{ form.name.id_for_label }}" class="form-label">Nomi</label>
              {{ form.name }}
              {{ form.name.errors }}
            </div>

            <div class="mb-3">
              <label for="{{ form.price_per_unit.id_for_label }}" class="form-label">Narxi / donasi (UZS)</label>
              {{ form.price_per_unit }}
              {{ form.price_per_unit.errors }}
            </div>

            <div class="form-check form-switch mb-3">
              {{ form.is_active }}
              <label class="form-check-label" for="{{ form.is_active.id_for_label }}">Aktiv</label>
            </div>

            <div class="mb-3">
              <label for="{{ form.image.id_for_label }}" class="form-label">Rasm (o'zgartirish)</label>
              {{ form.image }}
              {{ form.image.errors }}
            </div>

            <div class="d-flex justify-content-between">
              <a href="{% url 'view_product' product.pk %}" class="btn btn-outline-secondary">Bekor qilish</a>
              <button type="submit" class="btn btn-warning text-dark">Saqlash</button>
            </div>
          </form>
        </div>

      </div><!-- card -->

    </div><!-- col -->
  </div><!-- row -->
</div><!-- container -->
{% endblock %}
